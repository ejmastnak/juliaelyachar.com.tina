---
import client from "@tina/__generated__/client";
import BaseLayout from "@/layouts/BaseLayout.astro";
import Home from "@tina/pages/Home/Index.tsx";
import { optimizeTinaImages } from '@/lib/optimizeTinaImages';

const content = await client.queries.myHomePage({ relativePath: "index.json" });
const events = await client.queries.myEvent({ relativePath: "index.json" });
const publications = await client.queries.myPublication({ relativePath: "index.json" });

const head = content.data.homePage.head;

await optimizeTinaImages(content, [
  {
    srcPath: ['data', 'homePage', 'heroImg'],
    altPath: ['data', 'homePage', 'heroImgAlt'],
    width: 700,
  },
  {
    srcPath: ['data', 'homePage', 'bookImg'],
    altPath: ['data', 'homePage', 'bookImgAlt'],
    width: 800,
  },
]);
---

<BaseLayout head={head}>
  <Home {...content} eventsData={events.data} publicationsData={publications.data} client:tina />
</BaseLayout>
